const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Df7D7MkV.js","assets/graph_model-awIRT3sz.js","assets/mobilenet.esm-BRLMM1Pe.js"])))=>i.map(i=>d[i]);
import{g as T,J as B,K as C,o as l,c as n,a as t,b as m,F as h,j as _,t as d,i as K,v as N,B as F,r as o,D as R,l as O,p as P}from"./index-DS0o_xtd.js";const S={class:"min-h-screen bg-gray-900 pb-20"},U={class:"p-4 pt-12 text-white"},$={class:"relative mx-4 rounded-2xl overflow-hidden bg-black"},z={class:"absolute bottom-4 left-1/2 -translate-x-1/2"},G=["disabled"],H={key:0,class:"absolute inset-0 bg-black/50 flex items-center justify-center"},J={key:0,class:"p-4"},W={class:"flex flex-wrap gap-2 mb-6"},q=["disabled"],Q={key:1,class:"p-4 pt-0"},X={class:"space-y-3"},Y={class:"font-bold text-white mb-2"},Z={class:"text-sm text-gray-400 mb-2"},ee={class:"flex gap-2 text-xs text-gray-500"},te={class:"p-4 pt-0"},ae={class:"border-t border-gray-800 pt-4"},se={class:"flex gap-2"},le={class:"flex flex-wrap gap-2 mt-3"},ne=["onClick"],ie={__name:"IngredientScanner",setup(oe){O();const r=o(null),g=o(!0),b=o(!1),c=o(!1),u=o([]),v=o(""),i=o([]),p=o([]);let f=null,x=null;const A={apple:"è‹¹æœ",banana:"é¦™è•‰",orange:"æ©™å­",tomato:"ç•ªèŒ„",broccoli:"è¥¿å…°èŠ±",carrot:"èƒ¡èåœ",onion:"æ´‹è‘±",garlic:"å¤§è’œ",pizza:"æŠ«è¨",burger:"æ±‰å ¡","hot dog":"çƒ­ç‹—","ice cream":"å†°æ·‡æ·‹",pancake:"ç…é¥¼",waffle:"åå¤«é¥¼",cheese:"å¥¶é…ª",egg:"é¸¡è›‹",meat:"è‚‰",chicken:"é¸¡è‚‰",beef:"ç‰›è‚‰",pork:"çŒªè‚‰",fish:"é±¼",shrimp:"è™¾",rice:"ç±³é¥­",bread:"é¢åŒ…",noodle:"é¢æ¡",pasta:"æ„é¢",salad:"æ²™æ‹‰",sandwich:"ä¸‰æ˜æ²»",cake:"è›‹ç³•",cookie:"é¥¼å¹²",chocolate:"å·§å…‹åŠ›",coffee:"å’–å•¡",juice:"æœæ±",milk:"ç‰›å¥¶",tea:"èŒ¶",wine:"è‘¡è„é…’"};T(async()=>{await E(),await M()}),B(()=>{f&&f.getTracks().forEach(a=>a.stop())});const E=async()=>{try{f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),r.value&&(r.value.srcObject=f)}catch(a){console.error("æ‘„åƒå¤´åˆå§‹åŒ–å¤±è´¥:",a),alert("æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼Œè¯·æ£€æŸ¥æƒé™")}},M=async()=>{try{const a=await C(()=>import("./index-Df7D7MkV.js"),__vite__mapDeps([0,1]));x=await(await C(()=>import("./mobilenet.esm-BRLMM1Pe.js"),__vite__mapDeps([2,1]))).load(),g.value=!1}catch(a){console.error("æ¨¡å‹åŠ è½½å¤±è´¥:",a),g.value=!1,g.value=!1}},j=async()=>{if(!(!x||!r.value)){b.value=!0;try{const a=document.createElement("canvas");a.width=r.value.videoWidth,a.height=r.value.videoHeight,a.getContext("2d").drawImage(r.value,0,0);const k=(await x.classify(a)).filter(y=>y.probability>.3).map(y=>{const I=y.className.toLowerCase();return A[I]||I});u.value=[...new Set(k)],u.value.length===0&&alert("æœªèƒ½è¯†åˆ«åˆ°å¸¸è§é£Ÿæï¼Œè¯·å°è¯•æ‰‹åŠ¨è¾“å…¥")}catch(a){console.error("è¯†åˆ«å¤±è´¥:",a),alert("è¯†åˆ«å¤±è´¥ï¼Œè¯·é‡è¯•")}b.value=!1}},D=async()=>{var a;if(u.value.length!==0){c.value=!0;try{const e=await R.ingredientRecipe({ingredients:u.value});e.data.success&&((a=e.data.data)!=null&&a.recipes)&&(p.value=e.data.data.recipes)}catch(e){console.error("è·å–èœè°±å¤±è´¥:",e)}c.value=!1}},w=()=>{v.value.trim()&&(i.value.push(v.value.trim()),v.value="")},V=a=>{i.value=i.value.filter(e=>e!==a)},L=async()=>{var a;if(i.value.length!==0){c.value=!0;try{const e=await R.ingredientRecipe({ingredients:i.value});e.data.success&&((a=e.data.data)!=null&&a.recipes)&&(p.value=e.data.data.recipes)}catch(e){console.error("è·å–èœè°±å¤±è´¥:",e)}c.value=!1}};return(a,e)=>(l(),n("div",S,[t("div",U,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.back()),class:"mb-4"},"â† è¿”å›"),e[2]||(e[2]=t("h1",{class:"text-2xl font-bold mb-2"},"ğŸ“¸ é£Ÿææ‰«æ",-1)),e[3]||(e[3]=t("p",{class:"text-gray-400"},"æ‹ç…§è¯†åˆ«å†°ç®±é‡Œçš„é£Ÿæï¼ŒAIå¸®ä½ æ¨èèœè°±",-1))]),t("div",$,[t("video",{ref_key:"video",ref:r,class:"w-full h-64 object-cover",autoplay:"",playsinline:""},null,512),t("div",z,[t("button",{onClick:j,disabled:b.value,class:"w-16 h-16 rounded-full bg-white flex items-center justify-center disabled:opacity-50"},[...e[4]||(e[4]=[t("div",{class:"w-12 h-12 rounded-full border-4 border-gray-300"},null,-1)])],8,G)]),g.value?(l(),n("div",H,[...e[5]||(e[5]=[t("div",{class:"text-white text-center"},[t("div",{class:"animate-spin text-4xl mb-2"},"â³"),t("p",null,"AIæ¨¡å‹åŠ è½½ä¸­...")],-1)])])):m("",!0)]),u.value.length>0?(l(),n("div",J,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold text-white mb-4"},"è¯†åˆ«åˆ°çš„é£Ÿæ",-1)),t("div",W,[(l(!0),n(h,null,_(u.value,s=>(l(),n("span",{key:s,class:"px-4 py-2 bg-green-500/20 text-green-400 rounded-full"},d(s),1))),128))]),t("button",{onClick:D,disabled:c.value,class:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-2xl shadow-lg active:scale-95 transition-transform"},d(c.value?"AIæ¨èä¸­...":"ğŸ¤– AIæ¨èèœè°±"),9,q)])):m("",!0),p.value.length>0?(l(),n("div",Q,[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold text-white mb-4"},"æ¨èèœè°±",-1)),t("div",X,[(l(!0),n(h,null,_(p.value,s=>(l(),n("div",{key:s.name,class:"bg-gray-800 rounded-2xl p-4"},[t("h3",Y,d(s.name),1),t("p",Z,d(s.reason),1),t("div",ee,[t("span",null,"â±ï¸ "+d(s.time||"æœªçŸ¥"),1),t("span",null,"ğŸ“Š "+d(s.difficulty||"æœªçŸ¥"),1)])]))),128))])])):m("",!0),t("div",te,[t("div",ae,[e[8]||(e[8]=t("p",{class:"text-gray-500 text-center mb-4"},"æˆ–æ‰‹åŠ¨è¾“å…¥é£Ÿæ",-1)),t("div",se,[K(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),type:"text",placeholder:"è¾“å…¥é£Ÿæåç§°",class:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-xl border border-gray-700",onKeyup:F(w,["enter"])},null,544),[[N,v.value]]),t("button",{onClick:w,class:"px-4 py-2 bg-gray-700 text-white rounded-xl"}," æ·»åŠ  ")]),t("div",le,[(l(!0),n(h,null,_(i.value,s=>(l(),n("span",{key:s,class:"px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-sm flex items-center gap-1"},[P(d(s)+" ",1),t("button",{onClick:k=>V(s),class:"text-gray-500"},"Ã—",8,ne)]))),128))]),i.value.length>0?(l(),n("button",{key:0,onClick:L,class:"w-full mt-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-xl"}," ğŸ¤– ç”¨è¿™äº›é£Ÿææ¨è ")):m("",!0)])])]))}};export{ie as default};
