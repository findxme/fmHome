import{g as Te,H as ne,o as N,c as j,a as o,t as x,G as se,F as Pe,j as Ee,r as U,f as z,n as oe,b as le}from"./index-DS0o_xtd.js";var ie={};(function Q(b,p,E,F){var D=!!(b.Worker&&b.Blob&&b.Promise&&b.OffscreenCanvas&&b.OffscreenCanvasRenderingContext2D&&b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype.transferControlToOffscreen&&b.URL&&b.URL.createObjectURL),W=typeof Path2D=="function"&&typeof DOMMatrix=="function",H=function(){if(!b.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function V(){}function A(a){var e=p.exports.Promise,r=e!==void 0?e:b.Promise;return typeof r=="function"?new r(a):(a(V,V),null)}var L=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var s=new OffscreenCanvas(r.width,r.height),l=s.getContext("2d");return l.drawImage(r,0,0),e.set(r,s),s},clear:function(){e.clear()}}}(H,new Map),O=function(){var a=Math.floor(16.666666666666668),e,r,s={},l=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(i){var c=Math.random();return s[c]=requestAnimationFrame(function n(d){l===d||l+a-1<d?(l=d,delete s[c],i()):s[c]=requestAnimationFrame(n)}),c},r=function(i){s[i]&&cancelAnimationFrame(s[i])}):(e=function(i){return setTimeout(i,a)},r=function(i){return clearTimeout(i)}),{frame:e,cancel:r}}(),G=function(){var a,e,r={};function s(l){function i(c,n){l.postMessage({options:c||{},callback:n})}l.init=function(n){var d=n.transferControlToOffscreen();l.postMessage({canvas:d},[d])},l.fire=function(n,d,h){if(e)return i(n,null),e;var g=Math.random().toString(36).slice(2);return e=A(function(v){function m(y){y.data.callback===g&&(delete r[g],l.removeEventListener("message",m),e=null,L.clear(),h(),v())}l.addEventListener("message",m),i(n,g),r[g]=m.bind(null,{data:{callback:g}})}),e},l.reset=function(){l.postMessage({reset:!0});for(var n in r)r[n](),delete r[n]}}return function(){if(a)return a;if(!E&&D){var l=["var CONFETTI, SIZE = {}, module = {};","("+Q.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([l])))}catch(i){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",i),null}s(a)}return a}}(),q={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function $(a,e){return e?e(a):a}function f(a){return a!=null}function t(a,e,r){return $(a&&f(a[e])?a[e]:q[e],r)}function C(a){return a<0?0:Math.floor(a)}function R(a,e){return Math.floor(Math.random()*(e-a))+a}function T(a){return parseInt(a,16)}function S(a){return a.map(Z)}function Z(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:T(e.substring(0,2)),g:T(e.substring(2,4)),b:T(e.substring(4,6))}}function M(a){var e=t(a,"origin",Object);return e.x=t(e,"x",Number),e.y=t(e,"y",Number),e}function ce(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function de(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function ue(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function he(a,e,r,s,l,i,c,n,d){a.save(),a.translate(e,r),a.rotate(i),a.scale(s,l),a.arc(0,0,1,c,n,d),a.restore()}function ve(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function fe(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,s=e.x+e.random*e.tiltCos,l=e.y+e.random*e.tiltSin,i=e.wobbleX+e.random*e.tiltCos,c=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),W&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(me(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(i-s)*.1,Math.abs(c-l)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var n=Math.PI/10*e.wobble,d=Math.abs(i-s)*.1,h=Math.abs(c-l)*.1,g=e.shape.bitmap.width*e.scalar,v=e.shape.bitmap.height*e.scalar,m=new DOMMatrix([Math.cos(n)*d,Math.sin(n)*d,-Math.sin(n)*h,Math.cos(n)*h,e.x,e.y]);m.multiplySelf(new DOMMatrix(e.shape.matrix));var y=a.createPattern(L.transform(e.shape.bitmap),"no-repeat");y.setTransform(m),a.globalAlpha=1-r,a.fillStyle=y,a.fillRect(e.x-g/2,e.y-v/2,g,v),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(i-s)*e.ovalScalar,Math.abs(c-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):he(a,e.x,e.y,Math.abs(i-s)*e.ovalScalar,Math.abs(c-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var u=Math.PI/2*3,w=4*e.scalar,_=8*e.scalar,k=e.x,P=e.y,B=5,I=Math.PI/B;B--;)k=e.x+Math.cos(u)*_,P=e.y+Math.sin(u)*_,a.lineTo(k,P),u+=I,k=e.x+Math.cos(u)*w,P=e.y+Math.sin(u)*w,a.lineTo(k,P),u+=I;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(l)),a.lineTo(Math.floor(i),Math.floor(c)),a.lineTo(Math.floor(s),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function ge(a,e,r,s,l){var i=e.slice(),c=a.getContext("2d"),n,d,h=A(function(g){function v(){n=d=null,c.clearRect(0,0,s.width,s.height),L.clear(),l(),g()}function m(){E&&!(s.width===F.width&&s.height===F.height)&&(s.width=a.width=F.width,s.height=a.height=F.height),!s.width&&!s.height&&(r(a),s.width=a.width,s.height=a.height),c.clearRect(0,0,s.width,s.height),i=i.filter(function(y){return fe(c,y)}),i.length?n=O.frame(m):v()}n=O.frame(m),d=v});return{addFettis:function(g){return i=i.concat(g),h},canvas:a,promise:h,reset:function(){n&&O.cancel(n),d&&d()}}}function X(a,e){var r=!a,s=!!t(e||{},"resize"),l=!1,i=t(e,"disableForReducedMotion",Boolean),c=D&&!!t(e||{},"useWorker"),n=c?G():null,d=r?ce:de,h=a&&n?!!a.__confetti_initialized:!1,g=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,v;function m(u,w,_){for(var k=t(u,"particleCount",C),P=t(u,"angle",Number),B=t(u,"spread",Number),I=t(u,"startVelocity",Number),ye=t(u,"decay",Number),xe=t(u,"gravity",Number),Me=t(u,"drift",Number),ee=t(u,"colors",S),we=t(u,"ticks",Number),ae=t(u,"shapes"),_e=t(u,"scalar"),ke=!!t(u,"flat"),re=M(u),te=k,K=[],Ce=a.width*re.x,Ie=a.height*re.y;te--;)K.push(ve({x:Ce,y:Ie,angle:P,spread:B,startVelocity:I,color:ee[te%ee.length],shape:ae[R(0,ae.length)],ticks:we,decay:ye,gravity:xe,drift:Me,scalar:_e,flat:ke}));return v?v.addFettis(K):(v=ge(a,K,d,w,_),v.promise)}function y(u){var w=i||t(u,"disableForReducedMotion",Boolean),_=t(u,"zIndex",Number);if(w&&g)return A(function(I){I()});r&&v?a=v.canvas:r&&!a&&(a=ue(_),document.body.appendChild(a)),s&&!h&&d(a);var k={width:a.width,height:a.height};n&&!h&&n.init(a),h=!0,n&&(a.__confetti_initialized=!0);function P(){if(n){var I={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};d(I),n.postMessage({resize:{width:I.width,height:I.height}});return}k.width=k.height=null}function B(){v=null,s&&(l=!1,b.removeEventListener("resize",P)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,h=!1)}return s&&!l&&(l=!0,b.addEventListener("resize",P,!1)),n?n.fire(u,k,B):m(u,k,B)}return y.reset=function(){n&&n.reset(),v&&v.reset()},y}var J;function Y(){return J||(J=X(null,{useWorker:!0,resize:!0})),J}function me(a,e,r,s,l,i,c){var n=new Path2D(a),d=new Path2D;d.addPath(n,new DOMMatrix(e));var h=new Path2D;return h.addPath(d,new DOMMatrix([Math.cos(c)*l,Math.sin(c)*l,-Math.sin(c)*i,Math.cos(c)*i,r,s])),h}function pe(a){if(!W)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var s=new Path2D(e),l=document.createElement("canvas"),i=l.getContext("2d");if(!r){for(var c=1e3,n=c,d=c,h=0,g=0,v,m,y=0;y<c;y+=2)for(var u=0;u<c;u+=2)i.isPointInPath(s,y,u,"nonzero")&&(n=Math.min(n,y),d=Math.min(d,u),h=Math.max(h,y),g=Math.max(g,u));v=h-n,m=g-d;var w=10,_=Math.min(w/v,w/m);r=[_,0,0,_,-Math.round(v/2+n)*_,-Math.round(m/2+d)*_]}return{type:"path",path:e,matrix:r}}function be(a){var e,r=1,s="#000000",l='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,l="fontFamily"in a?a.fontFamily:l,s="color"in a?a.color:s);var i=10*r,c=""+i+"px "+l,n=new OffscreenCanvas(i,i),d=n.getContext("2d");d.font=c;var h=d.measureText(e),g=Math.ceil(h.actualBoundingBoxRight+h.actualBoundingBoxLeft),v=Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent),m=2,y=h.actualBoundingBoxLeft+m,u=h.actualBoundingBoxAscent+m;g+=m+m,v+=m+m,n=new OffscreenCanvas(g,v),d=n.getContext("2d"),d.font=c,d.fillStyle=s,d.fillText(e,y,u);var w=1/r;return{type:"bitmap",bitmap:n.transferToImageBitmap(),matrix:[w,0,0,w,-g*w/2,-v*w/2]}}p.exports=function(){return Y().apply(this,arguments)},p.exports.reset=function(){Y().reset()},p.exports.create=X,p.exports.shapeFromPath=pe,p.exports.shapeFromText=be})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ie,!1);ie.exports.create;const Fe={class:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20"},Se={class:"p-4"},Be={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},Oe={class:"flex items-center gap-4 mb-4"},Re={class:"w-16 h-16 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-3xl"},Ae={class:"flex-1"},Le={class:"text-lg font-bold text-gray-800 dark:text-white"},Ne={class:"text-sm text-gray-500"},je={class:"text-right"},Ue={class:"text-2xl font-bold text-amber-500"},ze={class:"relative h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},De={class:"text-xs text-gray-500 mt-2 text-center"},We={class:"p-4 pt-0"},Ve={class:"grid grid-cols-3 gap-3"},qe={class:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center"},Ze={class:"text-lg font-bold text-gray-800 dark:text-white"},He={class:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center"},Ge={class:"text-lg font-bold text-gray-800 dark:text-white"},$e={class:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center"},Je={class:"text-lg font-bold text-gray-800 dark:text-white"},Ke={class:"p-4 pt-0"},Qe={class:"space-y-3"},Xe={class:"flex-1"},Ye={class:"font-semibold text-gray-800 dark:text-white"},ea={class:"text-sm text-gray-500"},aa={key:0,class:"mt-2"},ra={class:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},ta={class:"text-xs text-gray-400 mt-1"},na={key:0,class:"text-green-500 text-2xl"},sa={class:"p-4 pt-0"},oa=["disabled"],ia={__name:"Achievements",setup(Q){const b=U([]),p=U(null),E=U(!1),F=U(!1),D=U([]),W=["Êñ∞Êâã","ÂàùÂ≠¶ËÄÖ","Â∞èÂé®Â∏à","Âé®ÊàøËÄÅÊâã","ÁÉπÈ•™Ëææ‰∫∫","Âé®Á•û"],H=["üå±","üç≥","üë®‚Äçüç≥","üèÖ","ü•á","üëë"],V=z(()=>{var f;return W[(((f=p.value)==null?void 0:f.level)||1)-1]}),A=z(()=>{var f;return H[(((f=p.value)==null?void 0:f.level)||1)-1]}),L=z(()=>b.value.filter(f=>f.is_unlocked).length),O=z(()=>{var C;const f=((C=p.value)==null?void 0:C.level)||1;return{1:50,2:150,3:300,4:500,5:800,6:1e3}[f]||100}),G=z(()=>{var T,S;const f=((T=p.value)==null?void 0:T.experience_points)||0,t=((S=p.value)==null?void 0:S.level)||1,C=t===1?0:(t-1)*100,R=O.value;return Math.min(100,(f-C)/(R-C)*100)});Te(async()=>{await q()});const q=async()=>{try{const f=await ne.getMy();f.data.success&&(b.value=f.data.data.achievements||[],p.value=f.data.data.level)}catch(f){console.error("Âä†ËΩΩÊàêÂ∞±Â§±Ë¥•:",f)}},$=async()=>{var f;E.value=!0;try{const t=await ne.check();t.data.success&&((f=t.data.newlyUnlocked)==null?void 0:f.length)>0&&(D.value=t.data.newlyUnlocked,F.value=!0,setTimeout(()=>{F.value=!1},3e3)),await q()}catch(t){console.error("Ê£ÄÊü•ÊàêÂ∞±Â§±Ë¥•:",t)}E.value=!1};return(f,t)=>{var C,R,T,S,Z;return N(),j("div",Fe,[t[8]||(t[8]=o("div",{class:"bg-gradient-to-r from-amber-500 to-orange-500 text-white p-6 pt-12"},[o("h1",{class:"text-2xl font-bold mb-2"},"üèÜ ÊàêÂ∞±Á≥ªÁªü"),o("p",{class:"text-amber-100"},"ËÆ∞ÂΩï‰Ω†ÁöÑÂé®Ëâ∫ËøõÈò∂‰πãË∑Ø")],-1)),o("div",Se,[o("div",Be,[o("div",Oe,[o("div",Re,x(A.value),1),o("div",Ae,[o("h3",Le,x(V.value),1),o("p",Ne,"ÁªèÈ™åÂÄº: "+x(((C=p.value)==null?void 0:C.experience_points)||0),1)]),o("div",je,[o("p",Ue,x(((R=p.value)==null?void 0:R.level)||1),1),t[0]||(t[0]=o("p",{class:"text-xs text-gray-400"},"Á≠âÁ∫ß",-1))])]),o("div",ze,[o("div",{class:"absolute left-0 top-0 h-full bg-gradient-to-r from-amber-400 to-orange-500 transition-all duration-500",style:se({width:G.value+"%"})},null,4)]),o("p",De,x(((T=p.value)==null?void 0:T.total_cooks)||0)+" Ê¨°ÁÉπÈ•™ / "+x(O.value)+" ÁªèÈ™åÂÄº ",1)])]),o("div",We,[o("div",Ve,[o("div",qe,[t[1]||(t[1]=o("p",{class:"text-2xl mb-1"},"üî•",-1)),o("p",Ze,x(((S=p.value)==null?void 0:S.consecutive_days)||0),1),t[2]||(t[2]=o("p",{class:"text-xs text-gray-500"},"ËøûÁª≠Â§©Êï∞",-1))]),o("div",He,[t[3]||(t[3]=o("p",{class:"text-2xl mb-1"},"üç≥",-1)),o("p",Ge,x(((Z=p.value)==null?void 0:Z.total_cooks)||0),1),t[4]||(t[4]=o("p",{class:"text-xs text-gray-500"},"ÊÄªÁÉπÈ•™",-1))]),o("div",$e,[t[5]||(t[5]=o("p",{class:"text-2xl mb-1"},"üèÖ",-1)),o("p",Je,x(L.value),1),t[6]||(t[6]=o("p",{class:"text-xs text-gray-500"},"Â∑≤Ëß£ÈîÅ",-1))])])]),o("div",Ke,[t[7]||(t[7]=o("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},"ÊàêÂ∞±ÂæΩÁ´†",-1)),o("div",Qe,[(N(!0),j(Pe,null,Ee(b.value,M=>(N(),j("div",{key:M.id,class:oe(["bg-white dark:bg-gray-800 rounded-2xl p-4 flex items-center gap-4",{"opacity-60":!M.is_unlocked}])},[o("div",{class:oe(["w-14 h-14 rounded-xl flex items-center justify-center text-2xl",M.is_unlocked?"bg-gradient-to-br from-amber-400 to-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-400"])},x(M.icon),3),o("div",Xe,[o("h3",Ye,x(M.name),1),o("p",ea,x(M.description),1),M.is_unlocked?le("",!0):(N(),j("div",aa,[o("div",ra,[o("div",{class:"h-full bg-amber-500 transition-all",style:se({width:M.progress/M.requirement*100+"%"})},null,4)]),o("p",ta,x(M.progress)+" / "+x(M.requirement),1)]))]),M.is_unlocked?(N(),j("div",na,"‚úÖ")):le("",!0)],2))),128))])]),o("div",sa,[o("button",{onClick:$,disabled:E.value,class:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold rounded-xl shadow-lg active:scale-95 transition-transform"},x(E.value?"Ê£ÄÊü•‰∏≠...":"üîç Ê£ÄÊü•Êñ∞ÊàêÂ∞±"),9,oa)])])}}};export{ia as default};
