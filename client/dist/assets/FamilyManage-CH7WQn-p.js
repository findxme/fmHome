import{g as _,I as x,o as u,c,a as e,i as y,v as m,t as l,F as C,j,r as o}from"./index-DS0o_xtd.js";const F={class:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20"},U={key:0,class:"p-6"},V={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-center shadow-sm"},$={class:"space-y-3"},B=["disabled"],M={class:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700"},N={class:"space-y-3"},A=["disabled"],D={key:1,class:"p-4"},T={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm mb-4"},E={class:"flex items-center justify-between mb-4"},I={class:"text-xl font-bold text-gray-800 dark:text-white"},J={class:"text-sm text-gray-500"},L={class:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 flex items-center justify-between"},S={class:"text-2xl font-mono font-bold text-gray-800 dark:text-white tracking-widest"},q={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm mb-4"},z={class:"space-y-3"},G={class:"flex items-center gap-3"},H={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white"},K={class:"font-medium text-gray-800 dark:text-white"},O={class:"text-xs text-gray-500"},P={class:"grid grid-cols-2 gap-3"},W={__name:"FamilyManage",setup(Q){const s=o(null),d=o(""),i=o(""),n=o(""),g=o(!1),b=o(!1);_(async()=>{await v()});const v=async()=>{try{const t=await x.get();t.data.success&&(s.value=t.data.data)}catch(t){console.error("åŠ è½½å®¶åº­ä¿¡æ¯å¤±è´¥:",t)}},f=async()=>{if(d.value){g.value=!0;try{const t=await x.create(d.value);t.data.success?(s.value=t.data.family,s.value.members=t.data.members):alert(t.data.error||"åˆ›å»ºå¤±è´¥")}catch(t){console.error("åˆ›å»ºå®¶åº­å¤±è´¥:",t),alert("åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}g.value=!1}},h=async()=>{if(!(!i.value||!n.value)){b.value=!0;try{const t=await x.join(i.value.toUpperCase(),n.value);t.data.success?(s.value=t.data.family,s.value.members=t.data.members):alert(t.data.error||"åŠ å…¥å¤±è´¥")}catch(t){console.error("åŠ å…¥å®¶åº­å¤±è´¥:",t),alert("åŠ å…¥å¤±è´¥ï¼Œè¯·é‡è¯•")}b.value=!1}},w=async()=>{try{const t=await x.refreshCode();t.data.success&&(s.value.invite_code=t.data.invite_code)}catch(t){console.error("åˆ·æ–°é‚€è¯·ç å¤±è´¥:",t)}},k=()=>{var t;(t=s.value)!=null&&t.invite_code&&(navigator.clipboard.writeText(s.value.invite_code),alert("é‚€è¯·ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"))};return(t,a)=>{var p;return u(),c("div",F,[a[13]||(a[13]=e("div",{class:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-6 pt-12"},[e("h1",{class:"text-2xl font-bold mb-2"},"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ å®¶åº­åŽ¨æˆ¿"),e("p",{class:"text-blue-100"},"å’Œå®¶äººä¸€èµ·åˆ†äº«ç¾Žé£Ÿçš„ä¹è¶£")],-1)),s.value?(u(),c("div",D,[e("div",T,[e("div",E,[e("div",null,[e("h2",I,l(s.value.name),1),e("p",J,"å®¶åº­æˆå‘˜: "+l(((p=s.value.members)==null?void 0:p.length)||0)+"äºº",1)]),e("button",{onClick:w,class:"px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full text-sm"}," ðŸ”„ åˆ·æ–°é‚€è¯·ç  ")]),e("div",L,[e("div",null,[a[9]||(a[9]=e("p",{class:"text-xs text-gray-500"},"é‚€è¯·ç ",-1)),e("p",S,l(s.value.invite_code||"------"),1)]),e("button",{onClick:k,class:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm"}," ðŸ“‹ å¤åˆ¶ ")])]),e("div",q,[a[10]||(a[10]=e("h3",{class:"font-semibold text-gray-800 dark:text-white mb-4"},"ðŸ‘¥ å®¶åº­æˆå‘˜",-1)),e("div",z,[(u(!0),c(C,null,j(s.value.members,r=>(u(),c("div",{key:r.id,class:"flex items-center justify-between py-2"},[e("div",G,[e("div",H,l(r.member_name.charAt(0)),1),e("div",null,[e("p",K,l(r.member_name),1),e("p",O,l(r.role==="admin"?"ç®¡ç†å‘˜":"æˆå‘˜"),1)])])]))),128))])]),e("div",P,[e("button",{onClick:a[3]||(a[3]=r=>t.$router.push("/achievements")),class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm text-left"},[...a[11]||(a[11]=[e("p",{class:"text-2xl mb-2"},"ðŸ†",-1),e("p",{class:"font-semibold text-gray-800 dark:text-white"},"æˆå°±",-1),e("p",{class:"text-xs text-gray-500"},"æŸ¥çœ‹æˆå°±è¿›åº¦",-1)])]),e("button",{onClick:a[4]||(a[4]=r=>t.$router.push("/menu")),class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm text-left"},[...a[12]||(a[12]=[e("p",{class:"text-2xl mb-2"},"ðŸ“…",-1),e("p",{class:"font-semibold text-gray-800 dark:text-white"},"èœå•è®¡åˆ’",-1),e("p",{class:"text-xs text-gray-500"},"è§„åˆ’æ¯å‘¨èœå•",-1)])])])])):(u(),c("div",U,[e("div",V,[a[6]||(a[6]=e("p",{class:"text-6xl mb-4"},"ðŸ ",-1)),a[7]||(a[7]=e("h2",{class:"text-xl font-bold text-gray-800 dark:text-white mb-2"},"åˆ›å»ºä½ çš„å®¶åº­",-1)),a[8]||(a[8]=e("p",{class:"text-gray-500 mb-6"},"åˆ›å»ºä¸€ä¸ªå®¶åº­ï¼Œé‚€è¯·å®¶äººä¸€èµ·åˆ†äº«èœè°±ã€èœå•è®¡åˆ’å’Œçƒ¹é¥ªä¹è¶£",-1)),e("div",$,[y(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>d.value=r),type:"text",placeholder:"è¾“å…¥å®¶åº­åç§°",class:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"},null,512),[[m,d.value]]),e("button",{onClick:f,disabled:!d.value||g.value,class:"w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-bold rounded-xl shadow-lg active:scale-95 transition-transform disabled:opacity-50"},l(g.value?"åˆ›å»ºä¸­...":"âœ¨ åˆ›å»ºå®¶åº­"),9,B)]),e("div",M,[a[5]||(a[5]=e("p",{class:"text-gray-500 mb-3"},"å·²æœ‰å®¶åº­ï¼Ÿè¾“å…¥é‚€è¯·ç åŠ å…¥",-1)),e("div",N,[y(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>i.value=r),type:"text",placeholder:"è¾“å…¥6ä½é‚€è¯·ç ",class:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white uppercase",maxlength:"6"},null,512),[[m,i.value]]),y(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>n.value=r),type:"text",placeholder:"ä½ çš„æ˜µç§°",class:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"},null,512),[[m,n.value]]),e("button",{onClick:h,disabled:!i.value||!n.value||b.value,class:"w-full py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white font-bold rounded-xl active:scale-95 transition-transform disabled:opacity-50"},l(b.value?"åŠ å…¥ä¸­...":"ðŸ”— åŠ å…¥å®¶åº­"),9,A)])])])]))])}}};export{W as default};
