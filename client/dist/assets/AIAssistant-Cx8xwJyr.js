import{_ as E,u as G,o,c as l,a as t,F as c,j as g,t as r,b as u,i as A,v as I,h as H,r as n,D as k,y as K,n as V,p as W}from"./index-DS0o_xtd.js";const X={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300"},Y={class:"bg-gradient-to-r from-purple-500 to-pink-500 text-white sticky top-0 z-30 pt-safe"},Z={class:"max-w-4xl mx-auto px-4 pb-4 flex items-center gap-4"},tt={class:"max-w-4xl mx-auto px-4 py-4 pb-24"},et={class:"grid grid-cols-4 gap-2 mb-4"},st=["onClick"],at={class:"text-2xl block mb-1"},rt={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},ot={key:0,class:"space-y-4"},lt={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},nt={class:"space-y-4"},it={class:"flex flex-wrap gap-2"},dt=["onClick"],ut={class:"flex flex-wrap gap-2"},ct=["onClick"],gt=["disabled"],pt={key:0,class:"mt-6 grid grid-cols-2 gap-3"},xt=["onClick"],yt=["src","alt"],mt={class:"font-medium text-sm text-gray-800 dark:text-white"},vt={class:"text-xs text-gray-500"},bt={key:1,class:"space-y-4"},kt={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},ht=["disabled"],ft={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},_t={class:"font-bold text-lg text-gray-800 dark:text-white mb-4"},wt={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Ct={class:"mb-4"},At={class:"space-y-1"},It={class:"space-y-2"},$t={class:"text-purple-500 font-bold"},Dt={key:2,class:"space-y-4"},Nt={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},St={class:"flex flex-wrap gap-2 mt-3"},Vt=["onClick"],Lt=["disabled"],Mt={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},Ot={class:"text-gray-700 dark:text-gray-300 whitespace-pre-line"},Qt={class:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-800 rounded-2xl p-4"},jt={class:"text-sm text-gray-600 dark:text-gray-400"},zt={key:3,class:"space-y-4"},Bt={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},Jt={class:"flex gap-2 mb-4"},Tt=["disabled"],Ut={key:0,class:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4"},Ft={class:"text-center"},Rt={class:"text-4xl font-bold text-purple-600 dark:text-purple-400"},Pt={class:"mt-4 grid grid-cols-3 gap-2 text-center text-sm"},qt={class:"font-medium text-gray-800 dark:text-white"},Et={class:"font-medium text-gray-800 dark:text-white"},Gt={class:"font-medium text-gray-800 dark:text-white"},Ht={key:4,class:"space-y-4"},Kt={class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},Wt={class:"flex flex-wrap gap-2 mt-3"},Xt=["onClick"],Yt=["disabled"],Zt={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm"},te={class:"text-gray-700 dark:text-gray-300 whitespace-pre-line"},ee={__name:"AIAssistant",setup(se){const M=G(),p=n("recommend"),O=[{id:"recommend",icon:"ğŸ½ï¸",title:"æ¨è"},{id:"generate",icon:"ğŸ¨",title:"åˆ›ä½œ"},{id:"nutrition",icon:"ğŸ¥—",title:"è¥å…»"},{id:"calorie",icon:"ğŸ”¥",title:"çƒ­é‡"}],Q=["ä¸é™","è¾£","æ¸…æ·¡","ç”œ","é…¸"],j=["ä¸é™","ç®€å•","ä¸­ç­‰","å›°éš¾"],m=K({taste:"ä¸é™",difficulty:"ä¸é™",count:6}),h=n(!1),$=n([]),z=async()=>{h.value=!0;try{const a=await k.recommend(m);$.value=a.data.data||[]}catch(a){console.error("æ¨èå¤±è´¥:",a)}finally{h.value=!1}},y=n(""),f=n(!1),i=n(null),B=async()=>{if(y.value.trim()){f.value=!0;try{const a=await k.chat({question:`è¯·æ ¹æ®ä»¥ä¸‹æè¿°ç”Ÿæˆä¸€é“å®Œæ•´çš„èœè°±ï¼ŒåŒ…æ‹¬èœåã€æè¿°ã€æ‰€éœ€é£Ÿæå’Œçƒ¹é¥ªæ­¥éª¤ã€‚æ ¼å¼è¯·æŒ‰JSONè¿”å›ï¼š${y.value}`});if(a.data.data)try{const e=a.data.data.match(/\{[\s\S]*\}/);if(e){const s=JSON.parse(e[0]);i.value={name:s.name||"AIåˆ›ä½œèœå“",description:s.description||"",ingredients:s.ingredients||[],steps:s.steps||[]}}}catch{i.value={name:"AIåˆ›ä½œèœå“",description:y.value,ingredients:["æ ¹æ®AIç”Ÿæˆçš„èœè°±æ·»åŠ "],steps:["è¯·æŸ¥çœ‹AIå›ç­”è·å–è¯¦ç»†æ­¥éª¤"]}}}catch(a){console.error("ç”Ÿæˆå¤±è´¥:",a)}finally{f.value=!1}}},J=()=>{if(!i.value)return;const a={id:"custom_"+Date.now(),name:i.value.name,description:i.value.description,category:"AIåˆ›ä½œ",difficulty:"ä¸­ç­‰",cooking_time:"30åˆ†é’Ÿ",ingredients:i.value.ingredients.map(e=>({name:e,amount:"é€‚é‡",category:"å…¶ä»–"})),steps:i.value.steps.map((e,s)=>({title:`æ­¥éª¤${s+1}`,description:e})),isSample:!1};M.addCustomDish(a),alert("èœè°±å·²ä¿å­˜ï¼"),i.value=null,y.value=""},v=n(""),_=n(!1),D=n(""),T=["ç•ªèŒ„ç‚’è›‹æœ‰è¥å…»å—ï¼Ÿ","å‡è‚¥èƒ½åƒçº¢çƒ§è‚‰å—ï¼Ÿ","å“ªäº›é£Ÿç‰©ç»´ç”Ÿç´ Cå¤šï¼Ÿ","æ—©é¤åƒä»€ä¹ˆæœ€å¥åº·ï¼Ÿ"],L=["æ¯å¤©æ‘„å…¥è¶³å¤Ÿçš„è›‹ç™½è´¨æœ‰åŠ©äºç»´æŒè‚Œè‚‰è´¨é‡ï¼Œé¸¡è›‹ã€é±¼è‚‰ã€è±†åˆ¶å“éƒ½æ˜¯ä¼˜è´¨è›‹ç™½æ¥æºã€‚","å¤šåƒæ·±è‰²è”¬èœå¦‚è èœã€è¥¿å…°èŠ±ï¼Œè¥å…»ä»·å€¼æ›´é«˜ã€‚","é€‚é‡æ‘„å…¥åšæœæœ‰ç›Šå¥åº·ï¼Œä½†æ¯å¤©ä¸è¦è¶…è¿‡ä¸€å°æŠŠã€‚","å¤šå–æ°´ï¼æˆäººæ¯å¤©åº”å–8æ¯æ°´ï¼Œçº¦2å‡ã€‚","æ™šé¤å°½é‡åœ¨ç¡å‰3å°æ—¶åƒå®Œï¼Œæœ‰åŠ©äºæ¶ˆåŒ–å’Œç¡çœ ã€‚"],U=L[Math.floor(Math.random()*L.length)],F=async()=>{if(v.value.trim()){_.value=!0;try{const a=await k.chat({question:`è¥å…»é—®é¢˜ï¼š${v.value}ï¼Œè¯·ç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼å›ç­”ã€‚`});a.data.data&&(D.value=a.data.data)}catch(a){console.error("é—®ç­”å¤±è´¥:",a)}finally{_.value=!1}}},w=n(""),N=n(!1),x=n(null),R=async()=>{if(w.value.trim()){N.value=!0;try{const a=await k.chat({question:`è¯·è®¡ç®—ä»¥ä¸‹é£Ÿç‰©çš„çƒ­é‡å’Œè¥å…»æˆåˆ†ï¼Œåªè¿”å›JSONæ ¼å¼ï¼š${w.value}ã€‚æ ¼å¼ï¼š{"calories":æ•°å­—,"protein":æ•°å­—,"fat":æ•°å­—,"carbs":æ•°å­—}`});if(a.data.data)try{const e=a.data.data.match(/\{[\s\S]*\}/);e&&(x.value=JSON.parse(e[0]))}catch{x.value={calories:"? ",protein:"?",fat:"?",carbs:"?"}}}catch(a){console.error("è®¡ç®—å¤±è´¥:",a)}finally{N.value=!1}}},b=n(""),C=n(!1),S=n(""),P=["çº¢çƒ§è‚‰æ€ä¹ˆåšå¥½åƒï¼Ÿ","å¦‚ä½•è®©ç‚’èœæ›´é¦™ï¼Ÿ","æ€æ ·å»é™¤è…¥å‘³ï¼Ÿ","ç…é±¼æ€ä¹ˆä¸ç²˜é”…ï¼Ÿ"],q=async()=>{if(b.value.trim()){C.value=!0;try{const a=await k.chat({question:b.value});a.data.data&&(S.value=a.data.data)}catch(a){console.error("é—®ç­”å¤±è´¥:",a)}finally{C.value=!1}}};return(a,e)=>(o(),l("div",X,[t("header",Y,[t("div",Z,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.back()),class:"p-2 hover:bg-white/20 rounded-lg transition-colors"},[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[6]||(e[6]=t("h1",{class:"text-xl font-bold"},"ğŸ¤– AI å¨æˆ¿åŠ©æ‰‹",-1))])]),t("div",tt,[t("div",et,[(o(),l(c,null,g(O,s=>t("button",{key:s.id,onClick:d=>p.value=s.id,class:V(["p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm text-center hover:shadow-md transition-all",{"ring-2 ring-purple-500 bg-purple-50 dark:bg-purple-900/20":p.value===s.id}])},[t("span",at,r(s.icon),1),t("span",rt,r(s.title),1)],10,st)),64))]),p.value==="recommend"?(o(),l("div",ot,[t("div",lt,[e[9]||(e[9]=t("h2",{class:"font-semibold text-gray-800 dark:text-white mb-4"},"ğŸ½ï¸ æ™ºèƒ½æ¨è",-1)),t("div",nt,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-2"},"å£å‘³åå¥½",-1)),t("div",it,[(o(),l(c,null,g(Q,s=>t("button",{key:s,onClick:d=>m.taste=s,class:V(["px-4 py-2 rounded-full text-sm transition-all",m.taste===s?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200"])},r(s),11,dt)),64))])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-2"},"éš¾åº¦",-1)),t("div",ut,[(o(),l(c,null,g(j,s=>t("button",{key:s,onClick:d=>m.difficulty=s,class:V(["px-4 py-2 rounded-full text-sm transition-all",m.difficulty===s?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200"])},r(s),11,ct)),64))])]),t("button",{onClick:z,class:"btn-primary w-full",disabled:h.value},r(h.value?"ğŸ¤” AIæ¨èä¸­...":"âœ¨ è·å–æ¨è"),9,gt)]),$.value.length>0?(o(),l("div",pt,[(o(!0),l(c,null,g($.value,s=>(o(),l("div",{key:s.id,class:"bg-gray-50 dark:bg-gray-700 rounded-xl p-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:d=>a.$router.push(`/dish/${s.id}`)},[t("img",{src:s.image_url,alt:s.name,class:"w-full h-24 rounded-lg object-cover mb-2"},null,8,yt),t("p",mt,r(s.name),1),t("p",vt,r(s.cooking_time)+" Â· "+r(s.difficulty),1)],8,xt))),128))])):u("",!0)])])):u("",!0),p.value==="generate"?(o(),l("div",bt,[t("div",kt,[e[10]||(e[10]=t("h2",{class:"font-semibold text-gray-800 dark:text-white mb-2"},"ğŸ¨ AIåˆ›ä½œèœå“",-1)),e[11]||(e[11]=t("p",{class:"text-sm text-gray-500 mb-4"},"æè¿°ä½ æƒ³è¦çš„èœå“ï¼ŒAIå¸®ä½ ç”Ÿæˆå®Œæ•´èœè°±",-1)),A(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>y.value=s),placeholder:"ä¾‹å¦‚ï¼šæˆ‘æƒ³åƒä¸€é“é…¸ç”œå¯å£çš„å®¶å¸¸èœï¼Œç”¨é¸¡è‚‰å’Œç•ªèŒ„æ¥åš...",rows:"4",class:"w-full p-3 border dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[I,y.value]]),t("button",{onClick:B,class:"btn-primary w-full mt-4",disabled:f.value},r(f.value?"ğŸ¨ AIåˆ›ä½œä¸­...":"ğŸš€ ç”Ÿæˆèœè°±"),9,ht)]),i.value?(o(),l("div",ft,[t("h3",_t,r(i.value.name),1),t("p",wt,r(i.value.description),1),t("div",Ct,[e[12]||(e[12]=t("h4",{class:"font-medium text-gray-800 dark:text-white mb-2"},"ğŸ“ æ‰€éœ€é£Ÿæ",-1)),t("ul",At,[(o(!0),l(c,null,g(i.value.ingredients,(s,d)=>(o(),l("li",{key:d,class:"text-sm text-gray-600 dark:text-gray-400"},r(s),1))),128))])]),t("div",null,[e[13]||(e[13]=t("h4",{class:"font-medium text-gray-800 dark:text-white mb-2"},"ğŸ‘¨â€ğŸ³ çƒ¹é¥ªæ­¥éª¤",-1)),t("ol",It,[(o(!0),l(c,null,g(i.value.steps,(s,d)=>(o(),l("li",{key:d,class:"text-sm text-gray-600 dark:text-gray-400 flex gap-2"},[t("span",$t,r(d+1)+".",1),W(" "+r(s),1)]))),128))])]),t("button",{onClick:J,class:"w-full mt-4 py-3 bg-green-500 text-white font-bold rounded-xl"}," ğŸ’¾ ä¿å­˜åˆ°æˆ‘çš„èœè°± ")])):u("",!0)])):u("",!0),p.value==="nutrition"?(o(),l("div",Dt,[t("div",Nt,[e[14]||(e[14]=t("h2",{class:"font-semibold text-gray-800 dark:text-white mb-2"},"ğŸ¥— è¥å…»é—®ç­”",-1)),e[15]||(e[15]=t("p",{class:"text-sm text-gray-500 mb-4"},"é—®AIå…³äºé£Ÿç‰©è¥å…»æ­é…çš„é—®é¢˜",-1)),A(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),placeholder:"ä¾‹å¦‚ï¼šç•ªèŒ„ç‚’è›‹çš„çƒ­é‡é«˜å—ï¼Ÿå‡è‚¥æœŸé—´èƒ½åƒå—ï¼Ÿ",rows:"3",class:"w-full p-3 border dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[I,v.value]]),t("div",St,[(o(),l(c,null,g(T,s=>t("button",{key:s,onClick:d=>v.value=s,class:"px-3 py-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-xs rounded-full hover:bg-gray-200"},r(s),9,Vt)),64))]),t("button",{onClick:F,class:"btn-primary w-full mt-4",disabled:_.value},r(_.value?"ğŸ¤” AIæ€è€ƒä¸­...":"ğŸ’¬ æé—®"),9,Lt)]),D.value?(o(),l("div",Mt,[e[16]||(e[16]=t("h4",{class:"font-medium text-gray-800 dark:text-white mb-2"},"ğŸ“‹ AI å›ç­”",-1)),t("p",Ot,r(D.value),1)])):u("",!0),t("div",Qt,[e[17]||(e[17]=t("h3",{class:"font-medium text-green-700 dark:text-green-400 mb-2"},"ğŸ’¡ ä»Šæ—¥è¥å…»å°è´´å£«",-1)),t("p",jt,r(H(U)),1)])])):u("",!0),p.value==="calorie"?(o(),l("div",zt,[t("div",Bt,[e[22]||(e[22]=t("h2",{class:"font-semibold text-gray-800 dark:text-white mb-2"},"ğŸ”¥ å¡è·¯é‡Œè®¡ç®—å™¨",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500 mb-4"},"è¾“å…¥é£Ÿæï¼Œè®¡ç®—çƒ­é‡",-1)),t("div",Jt,[A(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),type:"text",placeholder:"è¾“å…¥é£Ÿæåç§°å’Œé‡ï¼Œå¦‚ï¼šç±³é¥­ 100å…‹",class:"flex-1 p-3 border dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white"},null,512),[[I,w.value]]),t("button",{onClick:R,disabled:N.value,class:"px-4 py-2 bg-purple-500 text-white rounded-xl"}," è®¡ç®— ",8,Tt)]),x.value?(o(),l("div",Ut,[t("div",Ft,[t("p",Rt,r(x.value.calories),1),e[18]||(e[18]=t("p",{class:"text-sm text-gray-500"},"åƒå¡",-1))]),t("div",Pt,[t("div",null,[t("p",qt,r(x.value.protein)+"g",1),e[19]||(e[19]=t("p",{class:"text-gray-500"},"è›‹ç™½è´¨",-1))]),t("div",null,[t("p",Et,r(x.value.fat)+"g",1),e[20]||(e[20]=t("p",{class:"text-gray-500"},"è„‚è‚ª",-1))]),t("div",null,[t("p",Gt,r(x.value.carbs)+"g",1),e[21]||(e[21]=t("p",{class:"text-gray-500"},"ç¢³æ°´",-1))])])])):u("",!0)])])):u("",!0),p.value==="chat"?(o(),l("div",Ht,[t("div",Kt,[e[24]||(e[24]=t("h2",{class:"font-semibold text-gray-800 dark:text-white mb-2"},"ğŸ’¬ çƒ¹é¥ªé—®ç­”",-1)),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500 mb-4"},"ä»»ä½•çƒ¹é¥ªé—®é¢˜éƒ½å¯ä»¥é—®æˆ‘",-1)),A(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>b.value=s),placeholder:"è¾“å…¥ä½ çš„çƒ¹é¥ªé—®é¢˜...",rows:"3",class:"w-full p-3 border dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white resize-none focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[I,b.value]]),t("div",Wt,[(o(),l(c,null,g(P,s=>t("button",{key:s,onClick:d=>b.value=s,class:"px-3 py-1 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-xs rounded-full hover:bg-gray-200"},r(s),9,Xt)),64))]),t("button",{onClick:q,class:"btn-primary w-full mt-4",disabled:C.value},r(C.value?"ğŸ¤” AIæ€è€ƒä¸­...":"ğŸ’¬ æé—®"),9,Yt)]),S.value?(o(),l("div",Zt,[e[26]||(e[26]=t("h4",{class:"font-medium text-gray-800 dark:text-white mb-2"},"ğŸ¤– AI å›ç­”",-1)),t("p",te,r(S.value),1)])):u("",!0)])):u("",!0)])]))}},re=E(ee,[["__scopeId","data-v-06982a8a"]]);export{re as default};
