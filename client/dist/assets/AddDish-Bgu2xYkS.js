import{u as T,g as q,y as z,o as i,c as l,a as e,t as x,w as A,F as h,j as v,b as I,i as d,v as g,E as V,q as E,d as L,e as F,T as H,x as R,r as k,l as W,n as G}from"./index-DS0o_xtd.js";import{v as K}from"./v4-CcQs6ztn.js";const P={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300"},Q={class:"bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-30 transition-colors duration-300 pt-safe"},X={class:"max-w-4xl mx-auto px-4 pb-4 flex items-center gap-4"},Y={class:"text-xl font-bold text-gray-800 dark:text-white"},Z={class:"max-w-4xl mx-auto px-4 py-6 pb-24"},ee={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},te={key:0,class:"mb-4"},oe={class:"flex gap-2 overflow-x-auto pb-2"},se=["src"],ae=["onClick"],re={class:"mb-3"},ne={class:"flex gap-2 overflow-x-auto pb-2"},ie=["onClick"],le=["src"],de={class:"flex gap-2"},ue={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},ge={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},ce={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},me={class:"grid grid-cols-2 gap-4 mb-4"},pe={class:"mb-4"},ye={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},be={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},xe={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},fe={key:0,class:"text-center py-4 text-gray-500 dark:text-gray-400"},he={key:1,class:"space-y-3"},ve=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],we=["onUpdate:modelValue"],_e=["onClick"],Ve={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 shadow-sm transition-colors duration-300"},Se={key:0,class:"text-center py-4 text-gray-500 dark:text-gray-400"},Ce={key:1,class:"space-y-4"},Ue={class:"flex items-center gap-2 mb-2"},Ie={class:"w-6 h-6 bg-accent-500 text-white rounded-full flex items-center justify-center text-sm font-medium"},De=["onUpdate:modelValue"],Ne=["onClick"],Me=["onUpdate:modelValue"],je=["disabled"],Oe={key:0,class:"fixed bottom-32 left-1/2 -translate-x-1/2 z-50"},Be={class:"flex items-center gap-2 px-4 py-3 bg-gray-800 dark:bg-white text-white dark:text-gray-800 rounded-full shadow-lg"},Je={class:"font-medium"},ze={__name:"AddDish",setup($e){const D=W(),w=R(),S=T(),f=k(!1),m=k(""),p=["https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400","https://images.unsplash.com/photo-1563245372-f21724e3856d?w=400","https://images.unsplash.com/photo-1525755662778-989d0524087?w=400","https://images.unsplash.com/photo-1603133872878-684f5c9322ed?w=400","https://images.unsplash.com/photo-1544025162-d76694265947?w=400","https://images.unsplash.com/photo-1623595119708-26b1f7300075?w=400"],y=k("");q(()=>{if(w.query.edit&&w.query.data)try{const a=JSON.parse(w.query.data);f.value=!0,m.value=a.id,t.name=a.name||"",t.category=a.category||"åˆé¤",t.difficulty=a.difficulty||"ä¸­ç­‰",t.cooking_time=a.cooking_time||"",t.servings=a.servings||"",t.description=a.description||"",t.tags=a.tags||"",t.image_url=a.image_url||"",t.ingredients=a.ingredients||[],t.steps=a.steps||[]}catch(a){console.error("è§£æç¼–è¾‘æ•°æ®å¤±è´¥:",a)}});const t=z({name:"",category:"åˆé¤",difficulty:"ä¸­ç­‰",cooking_time:"",servings:"",description:"",tags:"",images:[],video:"",ingredients:[],steps:[]}),C=a=>{t.images||(t.images=[]),t.images.includes(a)||t.images.push(a)},N=()=>{y.value.trim()&&(C(y.value.trim()),y.value="")},M=a=>{t.images.splice(a,1)},b=k({show:!1,message:"",icon:""}),U=(a,o)=>{b.value={show:!0,icon:a,message:o},setTimeout(()=>{b.value.show=!1},2e3)},j=()=>{t.ingredients.push({name:"",amount:"",category:"ä¸»æ–™"})},O=a=>{t.ingredients.splice(a,1)},B=()=>{t.steps.push({title:"",description:"",phase:"ä¸»æ–™"})},J=a=>{t.steps.splice(a,1)},$=()=>{var s,n;const a=t.ingredients.filter(r=>r.name&&r.name.trim()),o=t.steps.filter(r=>r.title&&r.title.trim()||r.description&&r.description.trim());if(f.value){const r={name:t.name,category:t.category,difficulty:t.difficulty,cooking_time:t.cooking_time,servings:t.servings,description:t.description,tags:t.tags,ingredients:a,steps:o,images:t.images&&t.images.length>0?t.images:[t.image_url||p[0]],video:t.video||"",image_url:((s=t.images)==null?void 0:s[0])||t.image_url||p[0]};if(m.value.startsWith("custom_")){const u=JSON.parse(localStorage.getItem("fmhome_custom_dishes")||"[]"),c=u.findIndex(_=>_.id===m.value);c!==-1&&(u[c]={...u[c],...r},localStorage.setItem("fmhome_custom_dishes",JSON.stringify(u)))}else if(m.value.startsWith("sample_")){const u=JSON.parse(localStorage.getItem("fmhome_sample_dishes")||"[]"),c=u.findIndex(_=>_.id===m.value);c!==-1&&(u[c]={...u[c],...r},localStorage.setItem("fmhome_sample_dishes",JSON.stringify(u)))}S.updateDish(m.value,r),U("âœ…","èœå“æ›´æ–°æˆåŠŸï¼")}else{const r={id:`custom_${K().slice(0,8)}`,name:t.name,category:t.category,difficulty:t.difficulty,cooking_time:t.cooking_time,servings:t.servings,description:t.description,tags:t.tags,ingredients:a,steps:o,images:t.images&&t.images.length>0?t.images:[t.image_url||p[0]],video:t.video||"",image_url:((n=t.images)==null?void 0:n[0])||t.image_url||p[0],rating:"5.0",isCustom:!0,createdAt:new Date().toISOString()},u=JSON.parse(localStorage.getItem("fmhome_custom_dishes")||"[]");u.unshift(r),localStorage.setItem("fmhome_custom_dishes",JSON.stringify(u)),S.addCustomDish(r),U("âœ…","èœå“æ·»åŠ æˆåŠŸï¼")}setTimeout(()=>{D.push("/")},1e3)};return(a,o)=>(i(),l("div",P,[e("header",Q,[e("div",X,[e("button",{onClick:o[0]||(o[0]=s=>a.$router.back()),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...o[10]||(o[10]=[e("svg",{class:"w-5 h-5 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("h1",Y,x(f.value?"âœï¸ ç¼–è¾‘èœå“":"â• æ·»åŠ èœå“"),1)])]),e("div",Z,[e("form",{onSubmit:A($,["prevent"]),class:"space-y-6"},[e("div",ee,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," èœå“å›¾ç‰‡ï¼ˆå¯å¤šé€‰ï¼‰ ",-1)),t.images&&t.images.length>0?(i(),l("div",te,[e("div",oe,[(i(!0),l(h,null,v(t.images,(s,n)=>(i(),l("div",{key:n,class:"relative flex-shrink-0"},[e("img",{src:s,alt:"é¢„è§ˆ",class:"w-20 h-20 object-cover rounded-lg"},null,8,se),e("button",{type:"button",onClick:r=>M(n),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs"}," Ã— ",8,ae)]))),128))])])):I("",!0),e("div",re,[o[11]||(o[11]=e("label",{class:"block text-xs text-gray-500 dark:text-gray-400 mb-2"},"å¿«æ·é€‰æ‹©ï¼ˆç‚¹å‡»æ·»åŠ å¤šå¼ ï¼‰",-1)),e("div",ne,[(i(),l(h,null,v(p,(s,n)=>e("button",{key:n,type:"button",onClick:r=>C(s),class:G(["flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all active:scale-95",t.images&&t.images.includes(s)?"border-accent-500 ring-2 ring-accent-500/30":"border-transparent hover:border-gray-300"])},[e("img",{src:s,alt:"é€‰é¡¹",class:"w-full h-full object-cover"},null,8,le)],10,ie)),64))])]),e("div",de,[d(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>y.value=s),type:"text",placeholder:"è¾“å…¥å›¾ç‰‡é“¾æ¥æ·»åŠ ...",class:"flex-1 px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white text-sm"},null,512),[[g,y.value]]),e("button",{type:"button",onClick:N,class:"px-4 py-2 bg-accent-500 text-white rounded-lg text-sm font-medium hover:bg-accent-600 active:scale-95 transition-all"}," æ·»åŠ  ")])]),e("div",ue,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," è§†é¢‘æ•™ç¨‹ï¼ˆé€‰å¡«ï¼‰ ",-1)),d(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>t.video=s),type:"text",placeholder:"è¾“å…¥è§†é¢‘é“¾æ¥ï¼ˆBç«™/æŠ–éŸ³/å°çº¢ä¹¦ï¼‰",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,512),[[g,t.video]]),o[14]||(o[14]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"æ”¯æŒBç«™ã€æŠ–éŸ³ã€å°çº¢ä¹¦ç­‰è§†é¢‘é“¾æ¥",-1))]),e("div",ge,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èœå“åç§° * ",-1)),d(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>t.name=s),type:"text",required:"",placeholder:"è¾“å…¥èœå“åç§°ï¼Œå¦‚ï¼šçº¢çƒ§è‚‰",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,512),[[g,t.name]])]),e("div",ce,[o[22]||(o[22]=e("h3",{class:"font-medium text-gray-800 dark:text-white mb-4"},"åŸºæœ¬ä¿¡æ¯",-1)),e("div",me,[e("div",null,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"åˆ†ç±»",-1)),d(e("select",{"onUpdate:modelValue":o[4]||(o[4]=s=>t.category=s),class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},[...o[16]||(o[16]=[E('<option value="æ—©é¤">æ—©é¤</option><option value="åˆé¤">åˆé¤</option><option value="æ™šé¤">æ™šé¤</option><option value="ç´ èœ">ç´ èœ</option><option value="æ±¤ç±»">æ±¤ç±»</option><option value="ç”œå“">ç”œå“</option><option value="é¥®å“">é¥®å“</option>',7)])],512),[[V,t.category]])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"éš¾åº¦",-1)),d(e("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>t.difficulty=s),class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},[...o[18]||(o[18]=[e("option",{value:"ç®€å•"},"ç®€å•",-1),e("option",{value:"ä¸­ç­‰"},"ä¸­ç­‰",-1),e("option",{value:"å›°éš¾"},"å›°éš¾",-1)])],512),[[V,t.difficulty]])])]),e("div",pe,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"çƒ¹é¥ªæ—¶é—´",-1)),d(e("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>t.cooking_time=s),type:"text",placeholder:"å¦‚ï¼š30åˆ†é’Ÿ",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,512),[[g,t.cooking_time]])]),e("div",null,[o[21]||(o[21]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ç”¨é¤äººæ•°",-1)),d(e("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>t.servings=s),type:"text",placeholder:"å¦‚ï¼š2-3äººä»½",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,512),[[g,t.servings]])])]),e("div",ye,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," èœå“æè¿° ",-1)),d(e("textarea",{"onUpdate:modelValue":o[8]||(o[8]=s=>t.description=s),rows:"3",placeholder:"æè¿°è¿™é“èœçš„ç‰¹ç‚¹...",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white resize-none"},null,512),[[g,t.description]])]),e("div",be,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ ",-1)),d(e("input",{"onUpdate:modelValue":o[9]||(o[9]=s=>t.tags=s),type:"text",placeholder:"å¦‚ï¼šçº¢çƒ§,äº”èŠ±è‚‰,å®¶å¸¸èœ",class:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,512),[[g,t.tags]])]),e("div",xe,[e("div",{class:"flex items-center justify-between mb-4"},[o[25]||(o[25]=e("h3",{class:"font-medium text-gray-800 dark:text-white"},"ğŸ›’ é£Ÿææ¸…å•",-1)),e("button",{type:"button",onClick:j,class:"text-accent-500 hover:text-accent-600 text-sm font-medium active:scale-95 transition-transform"}," + æ·»åŠ é£Ÿæ ")]),t.ingredients.length===0?(i(),l("div",fe,[...o[26]||(o[26]=[e("p",null,"æš‚æ— é£Ÿæï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ",-1)])])):(i(),l("div",he,[(i(!0),l(h,null,v(t.ingredients,(s,n)=>(i(),l("div",{key:n,class:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"},[d(e("select",{"onUpdate:modelValue":r=>s.category=r,class:"px-2 py-2 rounded-lg bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white text-sm"},[...o[27]||(o[27]=[e("option",{value:"ä¸»æ–™"},"ä¸»æ–™",-1),e("option",{value:"è°ƒæ–™"},"è°ƒæ–™",-1),e("option",{value:"é¦™æ–™"},"é¦™æ–™",-1)])],8,ve),[[V,s.category]]),d(e("input",{"onUpdate:modelValue":r=>s.name=r,type:"text",placeholder:"é£Ÿæåç§°",class:"flex-1 px-3 py-2 rounded-lg bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white text-sm"},null,8,ke),[[g,s.name]]),d(e("input",{"onUpdate:modelValue":r=>s.amount=r,type:"text",placeholder:"ç”¨é‡",class:"w-20 px-3 py-2 rounded-lg bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white text-sm"},null,8,we),[[g,s.amount]]),e("button",{type:"button",onClick:r=>O(n),class:"p-2 text-red-500 hover:text-red-600 active:text-red-700 active:scale-90 transition-all"},[...o[28]||(o[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,_e)]))),128))]))]),e("div",Ve,[e("div",{class:"flex items-center justify-between mb-4"},[o[29]||(o[29]=e("h3",{class:"font-medium text-gray-800 dark:text-white"},"ğŸ“ åˆ¶ä½œæ­¥éª¤",-1)),e("button",{type:"button",onClick:B,class:"text-accent-500 hover:text-accent-600 text-sm font-medium active:scale-95 transition-transform"}," + æ·»åŠ æ­¥éª¤ ")]),t.steps.length===0?(i(),l("div",Se,[...o[30]||(o[30]=[e("p",null,"æš‚æ— æ­¥éª¤ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ",-1)])])):(i(),l("div",Ce,[(i(!0),l(h,null,v(t.steps,(s,n)=>(i(),l("div",{key:n,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl"},[e("div",Ue,[e("span",Ie,x(n+1),1),d(e("input",{"onUpdate:modelValue":r=>s.title=r,type:"text",placeholder:"æ­¥éª¤æ ‡é¢˜",class:"flex-1 px-3 py-2 rounded-lg bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white"},null,8,De),[[g,s.title]]),e("button",{type:"button",onClick:r=>J(n),class:"p-2 text-red-500 hover:text-red-600 active:text-red-700 active:scale-90 transition-all"},[...o[31]||(o[31]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ne)]),d(e("textarea",{"onUpdate:modelValue":r=>s.description=r,rows:"2",placeholder:"è¯¦ç»†æè¿°è¿™ä¸ªæ­¥éª¤...",class:"w-full px-3 py-2 rounded-lg bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-500 dark:text-white resize-none text-sm"},null,8,Me),[[g,s.description]])]))),128))]))]),e("button",{type:"submit",disabled:!t.name,class:"w-full py-4 bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-xl font-medium shadow-lg shadow-accent-500/30 hover:shadow-xl hover:shadow-accent-500/40 active:scale-95 active:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}," ğŸ’¾ "+x(f.value?"ä¿å­˜ä¿®æ”¹":"ä¿å­˜èœå“"),9,je)],32)]),L(H,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-8","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-8"},{default:F(()=>[b.value.show?(i(),l("div",Oe,[e("div",Be,[e("span",null,x(b.value.icon),1),e("span",Je,x(b.value.message),1)])])):I("",!0)]),_:1})]))}};export{ze as default};
